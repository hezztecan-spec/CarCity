function rentCar(carName, price, icon) {
    rentedCar = { name: carName, price: price, icon: icon };
    document.getElementById('trackedCarName').textContent = carName;
    document.getElementById('trackedCarPrice').textContent = price;
    document.getElementById('carIcon').textContent = icon;
    document.getElementById('trackingSection').style.display = 'block';
    
    // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
    setTimeout(() => {
        if (!trackingMap) {
            const kyzylorda = [44.8526, 65.5089];
            trackingMap = L.map('trackingMap').setView(kyzylorda, 14);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap'
            }).addTo(trackingMap);

            // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è
            const carIcon = L.divIcon({
                html: icon,
                className: 'custom-icon',
                iconSize: [40, 40]
            });
            carMarker = L.marker(kyzylorda, { icon: carIcon }).addTo(trackingMap)
                .bindPopup(`<b>${carName}</b><br>üìç —É–ª. –ê–±–∞—è, 123<br>–°–∫–æ—Ä–æ—Å—Ç—å: 45 –∫–º/—á`);

            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
            let offset = 0;
            setInterval(() => {
                offset += 0.0001;
                const newPos = [44.8526 + offset, 65.5089 + offset];
                if (carMarker) carMarker.setLatLng(newPos);
            }, 2000);
        }
        if (carMarker) {
            const currentIcon = L.divIcon({
                html: icon,
                className: 'custom-icon',
                iconSize: [40, 40]
            });
            carMarker.setIcon(currentIcon);
            carMarker.getPopup().setContent(`<b>${carName}</b><br>üìç —É–ª. –ê–±–∞—è, 123<br>–°–∫–æ—Ä–æ—Å—Ç—å: 45 –∫–º/—á`);
        }
        trackingMap.invalidateSize();
    }, 300);
    
    document.getElementById('trackingSection').scrollIntoView({ behavior: 'smooth' });
    
    setTimeout(() => {
        alert('‚úÖ –ê–≤—Ç–æ–º–æ–±–∏–ª—å ' + carName + ' —É—Å–ø–µ—à–Ω–æ –∞—Ä–µ–Ω–¥–æ–≤–∞–Ω!\n\n–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.');
    }, 500);
}<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CarCity - –£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow-x: hidden;
    background: #0a0e27;
    color: white;
}

.landing {
    min-height: 100vh;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.landing::before {
    content: '';
    position: absolute;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
    background-size: 50px 50px;
    animation: moveBackground 20s linear infinite;
}

@keyframes moveBackground {
    0% { transform: translate(0, 0); }
    100% { transform: translate(50px, 50px); }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.logo {
    font-size: 72px;
    margin-bottom: 20px;
    animation: bounce 2s ease-in-out infinite;
    position: relative;
    z-index: 1;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
}

.landing-content {
    text-align: center;
    position: relative;
    z-index: 1;
    max-width: 800px;
}

h1 {
    font-size: 56px;
    margin-bottom: 20px;
    text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
}

.tagline {
    font-size: 24px;
    margin-bottom: 30px;
    opacity: 0.9;
}

.features-preview {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 40px 0;
    flex-wrap: wrap;
}

.feature-icon {
    font-size: 48px;
    background: rgba(255,255,255,0.2);
    padding: 20px;
    border-radius: 15px;
    backdrop-filter: blur(10px);
    transition: transform 0.3s;
}

.feature-icon:hover {
    transform: scale(1.1);
}

.start-btn {
    background: #fff;
    color: #667eea;
    border: none;
    padding: 20px 60px;
    font-size: 24px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    transition: all 0.3s;
    margin-top: 20px;
}

.start-btn:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.4);
}

.app-container {
    display: none;
    min-height: 100vh;
    background: #0a0e27;
}

.app-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

.app-logo {
    font-size: 32px;
    font-weight: bold;
}

.back-btn {
    background: rgba(255,255,255,0.2);
    border: none;
    padding: 10px 20px;
    border-radius: 20px;
    color: white;
    cursor: pointer;
    backdrop-filter: blur(10px);
}

.nav-tabs {
    display: flex;
    background: #1a1f3a;
    overflow-x: auto;
    padding: 10px;
}

.nav-tab {
    padding: 15px 25px;
    background: none;
    border: none;
    color: #8b95c9;
    cursor: pointer;
    font-size: 16px;
    white-space: nowrap;
    transition: all 0.3s;
    border-radius: 10px;
}

.nav-tab.active {
    background: #667eea;
    color: white;
}

.content-section {
    display: none;
    padding: 20px;
}

.content-section.active {
    display: block;
    animation: fadeIn 0.5s;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.section-title {
    font-size: 28px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.card {
    background: #1a1f3a;
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 15px;
    transition: transform 0.3s;
}

.card:hover {
    transform: translateX(5px);
}

.parking-item, .service-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.parking-item:last-child, .service-item:last-child {
    border-bottom: none;
}

.status {
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: bold;
}

.status.available {
    background: #10b981;
    color: white;
}

.status.full {
    background: #ef4444;
    color: white;
}

.price {
    color: #10b981;
    font-size: 20px;
    font-weight: bold;
}

.btn-action {
    background: #667eea;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    color: white;
    cursor: pointer;
    transition: background 0.3s;
}

.btn-action:hover {
    background: #5568d3;
}

.map-placeholder {
    background: #2a2f4a;
    height: 300px;
    border-radius: 15px;
    margin-bottom: 20px;
    border: 2px solid #667eea;
    overflow: hidden;
}

#map, #fuelMap, #trackingMap {
    height: 100%;
    width: 100%;
    border-radius: 15px;
}

.chat-container {
    height: 400px;
    display: flex;
    flex-direction: column;
}

.messages {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    background: #2a2f4a;
    border-radius: 15px;
    margin-bottom: 15px;
}

.message {
    background: #667eea;
    padding: 10px 15px;
    border-radius: 15px;
    margin-bottom: 10px;
    max-width: 70%;
}

.message.received {
    background: #1a1f3a;
    margin-left: auto;
}

.input-group {
    display: flex;
    gap: 10px;
}

.input-group input {
    flex: 1;
    padding: 15px;
    border-radius: 25px;
    border: none;
    background: #1a1f3a;
    color: white;
}

.rental-card {
    background: #1a1f3a;
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
    transition: transform 0.3s;
}

.rental-card:hover {
    transform: translateY(-5px);
}

.car-image {
    width: 100%;
    height: 200px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 80px;
    margin-bottom: 15px;
    overflow: hidden;
}

.car-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.car-info {
    margin-bottom: 15px;
}

.car-title {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 10px;
}

.car-specs {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin: 15px 0;
    padding: 15px;
    background: #0a0e27;
    border-radius: 10px;
}

.spec-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #8b95c9;
}

.spec-icon {
    font-size: 18px;
}

.tracking-info {
    background: #0a0e27;
    padding: 15px;
    border-radius: 10px;
    margin-top: 15px;
}

.tracking-status {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #1a1f3a;
}

.location-pin {
    font-size: 64px;
    animation: pulse 2s infinite;
    margin: 20px 0;
}

@media (max-width: 768px) {
    h1 { font-size: 36px; }
    .tagline { font-size: 18px; }
    .features-preview { gap: 10px; }
    .feature-icon { font-size: 36px; padding: 15px; }
    .car-specs { grid-template-columns: 1fr; }
}
</style>
</head>
<body>
<div class="landing" id="landing">
<div class="landing-content">
    <div class="logo">üöó</div>
    <h1>CarCity</h1>
    <p class="tagline">–£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∞–≤—Ç–æ</p>
    
    <div class="features-preview">
        <div class="feature-icon">üÖøÔ∏è</div>
        <div class="feature-icon">‚õΩ</div>
        <div class="feature-icon">üîß</div>
        <div class="feature-icon">üöò</div>
        <div class="feature-icon">üí¨</div>
    </div>

    <p style="font-size: 18px; margin: 20px 0;">–í—Å—ë –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –≤ –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</p>
    
    <button class="start-btn" onclick="startApp()">–ù–∞—á–∞—Ç—å üöÄ</button>
</div>
</div>

<div class="app-container" id="app">
<div class="app-header">
    <div class="app-logo">üöó CarCity</div>
    <button class="back-btn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<div class="nav-tabs">
    <button class="nav-tab active" data-section="parking">üÖøÔ∏è –ü–∞—Ä–∫–æ–≤–∫–∏</button>
    <button class="nav-tab" data-section="fuel">‚õΩ –ó–∞–ø—Ä–∞–≤–∫–∏</button>
    <button class="nav-tab" data-section="service">üîß –°–µ—Ä–≤–∏—Å—ã</button>
    <button class="nav-tab" data-section="rental">üöò –ê—Ä–µ–Ω–¥–∞ –∞–≤—Ç–æ</button>
    <button class="nav-tab" data-section="chat">üí¨ –ß–∞—Ç</button>
    <button class="nav-tab" data-section="roadside-assistance">üÜò –ü–æ–º–æ—â—å –Ω–∞ –¥–æ—Ä–æ–≥–µ</button>
</div>

<div class="content-section active" id="parking">
    <h2 class="section-title">üÖøÔ∏è –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–∞—Ä–∫–æ–≤–æ–∫</h2>
    <div class="map-placeholder">
        <div id="map"></div>
    </div>
    
    <div class="card" id="parking-item-dostyk-plaza" data-lat="44.8556" data-lng="65.5119" data-name="–¢–†–¶ Dostyk Plaza" data-description="12 –º–µ—Å—Ç" onclick="focusMapOnMarker('parkingMap', 44.8556, 65.5119, 15, '–¢–†–¶ Dostyk Plaza', '12 –º–µ—Å—Ç')">
        <div class="parking-item">
            <div>
                <strong>–¢–†–¶ "Dostyk Plaza"</strong><br>
                <small style="color: #8b95c9;">0.5 –∫–º –æ—Ç –≤–∞—Å</small>
            </div>
            <span class="status available">12 –º–µ—Å—Ç</span>
        </div>
    </div>

    <div class="card" id="parking-item-mega-center" data-lat="44.8496" data-lng="65.5059" data-name="–ü–∞—Ä–∫–æ–≤–∫–∞ Mega Center" data-description="28 –º–µ—Å—Ç" onclick="focusMapOnMarker('parkingMap', 44.8496, 65.5059, 15, '–ü–∞—Ä–∫–æ–≤–∫–∞ Mega Center', '28 –º–µ—Å—Ç')">
        <div class="parking-item">
            <div>
                <strong>–ü–∞—Ä–∫–æ–≤–∫–∞ "Mega Center"</strong><br>
                <small style="color: #8b95c9;">1.2 –∫–º –æ—Ç –≤–∞—Å</small>
            </div>
            <span class="status available">28 –º–µ—Å—Ç</span>
        </div>
    </div>

    <div class="card" id="parking-item-city-mall" data-lat="44.8426" data-lng="65.4989" data-name="–ö—Ä—ã—Ç–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞ City Mall" data-description="–ó–∞–Ω—è—Ç–æ" onclick="focusMapOnMarker('parkingMap', 44.8426, 65.4989, 15, '–ö—Ä—ã—Ç–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞ City Mall', '–ó–∞–Ω—è—Ç–æ')">
        <div class="parking-item">
            <div>
                <strong>–ö—Ä—ã—Ç–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞ "City Mall"</strong><br>
                <small style="color: #8b95c9;">2.3 –∫–º –æ—Ç –≤–∞—Å</small>
            </div>
            <span class="status full">–ó–∞–Ω—è—Ç–æ</span>
        </div>
    </div>
    
    <div class="card" id="parking-item-airport-parking" data-lat="44.8700" data-lng="65.5500" data-name="–ü–∞—Ä–∫–æ–≤–∫–∞ –ê—ç—Ä–æ–ø–æ—Ä—Ç" data-description="50 –º–µ—Å—Ç" onclick="focusMapOnMarker('parkingMap', 44.8700, 65.5500, 15, '–ü–∞—Ä–∫–æ–≤–∫–∞ –ê—ç—Ä–æ–ø–æ—Ä—Ç', '50 –º–µ—Å—Ç')">
        <div class="parking-item">
            <div>
                <strong>–ü–∞—Ä–∫–æ–≤–∫–∞ –ê—ç—Ä–æ–ø–æ—Ä—Ç</strong><br>
                <small style="color: #8b95c9;">5.0 –∫–º –æ—Ç –≤–∞—Å</small>
            </div>
            <span class="status available">50 –º–µ—Å—Ç</span>
        </div>
    </div>

    <div class="card" id="parking-item-railway-station-parking" data-lat="44.8200" data-lng="65.5200" data-name="–ü–∞—Ä–∫–æ–≤–∫–∞ –ñ–î –í–æ–∫–∑–∞–ª" data-description="15 –º–µ—Å—Ç" onclick="focusMapOnMarker('parkingMap', 44.8200, 65.5200, 15, '–ü–∞—Ä–∫–æ–≤–∫–∞ –ñ–î –í–æ–∫–∑–∞–ª', '15 –º–µ—Å—Ç')">
        <div class="parking-item">
            <div>
                <strong>–ü–∞—Ä–∫–æ–≤–∫–∞ –ñ–î –í–æ–∫–∑–∞–ª</strong><br>
                <small style="color: #8b95c9;">3.8 –∫–º –æ—Ç –≤–∞—Å</small>
            </div>
            <span class="status available">15 –º–µ—Å—Ç</span>
        </div>
    </div>
</div>

<div class="content-section" id="fuel">
    <h2 class="section-title">‚õΩ –ö–∞—Ä—Ç–∞ –ê–ó–° –∏ —Ü–µ–Ω—ã</h2>
    <div class="map-placeholder">
        <div id="fuelMap"></div>
    </div>

    <div class="card" id="fuel-item-kazmunaygaz-45" data-lat="44.8586" data-lng="65.5149" data-name="–ö–∞–∑–ú—É–Ω–∞–π–ì–∞–∑ –ê–ó–° ‚Ññ45" data-description="–ê–ò-92, –ê–ò-95, –î–¢" onclick="focusMapOnMarker('fuelMap', 44.8586, 65.5149, 15, '–ö–∞–∑–ú—É–Ω–∞–π–ì–∞–∑ –ê–ó–° ‚Ññ45', '–ê–ò-92, –ê–ò-95, –î–¢')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <strong>–ö–∞–∑–ú—É–Ω–∞–π–ì–∞–∑ –ê–ó–° ‚Ññ45</strong><br>
                <small style="color: #8b95c9;">0.8 –∫–º ‚Ä¢ –ê–ò-92, –ê–ò-95, –î–¢</small>
            </div>
            <div class="price">245‚Ç∏</div>
        </div>
    </div>

    <div class="card" id="fuel-item-helios-azs" data-lat="44.8466" data-lng="65.5029" data-name="Helios –ê–ó–°" data-description="–ê–ò-92, –ê–ò-95" onclick="focusMapOnMarker('fuelMap', 44.8466, 65.5029, 15, 'Helios –ê–ó–°', '–ê–ò-92, –ê–ò-95')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <strong>Helios –ê–ó–°</strong><br>
                <small style="color: #8b95c9;">1.5 –∫–º ‚Ä¢ –ê–ò-92, –ê–ò-95</small>
            </div>
            <div class="price">250‚Ç∏</div>
        </div>
    </div>

    <div class="card" id="fuel-item-sinooil-12" data-lat="44.8396" data-lng="65.4959" data-name="Sinooil –ê–ó–° ‚Ññ12" data-description="–ê–ò-92, –ê–ò-95, –î–¢, –ì–∞–∑" onclick="focusMapOnMarker('fuelMap', 44.8396, 65.4959, 15, 'Sinooil –ê–ó–° ‚Ññ12', '–ê–ò-92, –ê–ò-95, –î–¢, –ì–∞–∑')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <strong>Sinooil –ê–ó–° ‚Ññ12</strong><br>
                <small style="color: #8b95c9;">2.1 –∫–º ‚Ä¢ –ê–ò-92, –ê–ò-95, –î–¢, –ì–∞–∑</small>
            </div>
            <div class="price">242‚Ç∏</div>
        </div>
    </div>
    
    <div class="card" id="fuel-item-royal-petrol" data-lat="44.8650" data-lng="65.5250" data-name="Royal Petrol –ê–ó–°" data-description="–ê–ò-92, –ê–ò-95" onclick="focusMapOnMarker('fuelMap', 44.8650, 65.5250, 15, 'Royal Petrol –ê–ó–°', '–ê–ò-92, –ê–ò-95')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <strong>Royal Petrol –ê–ó–°</strong><br>
                <small style="color: #8b95c9;">1.0 –∫–º ‚Ä¢ –ê–ò-92, –ê–ò-95</small>
            </div>
            <div class="price">248‚Ç∏</div>
        </div>
    </div>

    <div class="card" id="fuel-item-petro-kazakhstan" data-lat="44.8300" data-lng="65.4800" data-name="Petro Kazakhstan" data-description="–ê–ò-92, –ê–ò-95, –î–¢" onclick="focusMapOnMarker('fuelMap', 44.8300, 65.4800, 15, 'Petro Kazakhstan', '–ê–ò-92, –ê–ò-95, –î–¢')">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <strong>Petro Kazakhstan</strong><br>
                <small style="color: #8b95c9;">3.0 –∫–º ‚Ä¢ –ê–ò-92, –ê–ò-95, –î–¢</small>
            </div>
            <div class="price">240‚Ç∏</div>
        </div>
    </div>
</div>

<div class="content-section" id="service">
    <h2 class="section-title">üîß –ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å—ã –æ–Ω–ª–∞–π–Ω</h2>
    
    <div class="card">
        <div class="service-item">
            <div>
                <strong>–ê–≤—Ç–æ–ú–∞—Å—Ç–µ—Ä –ü—Ä–æ—Ñ–∏</strong><br>
                <small style="color: #8b95c9;">‚≠ê 4.8 ‚Ä¢ 1.2 –∫–º ‚Ä¢ –û—Ç–∫—Ä—ã—Ç–æ –¥–æ 20:00</small><br>
                <small style="color: #10b981;">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, —Ä–µ–º–æ–Ω—Ç, –¢–û</small>
            </div>
            <button class="btn-action">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
        </div>
    </div>

    <div class="card">
        <div class="service-item">
            <div>
                <strong>–≠–∫—Å–ø—Ä–µ—Å—Å –°–µ—Ä–≤–∏—Å 24/7</strong><br>
                <small style="color: #8b95c9;">‚≠ê 4.9 ‚Ä¢ 0.7 –∫–º ‚Ä¢ –ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ</small><br>
                <small style="color: #10b981;">–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂, –∑–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞</small>
            </div>
            <button class="btn-action">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
        </div>
    </div>

    <div class="card">
        <div class="service-item">
            <div>
                <strong>–î–µ—Ç–µ–π–ª–∏–Ω–≥ –¶–µ–Ω—Ç—Ä "–ë–ª–µ—Å–∫"</strong><br>
                <small style="color: #8b95c9;">‚≠ê 5.0 ‚Ä¢ 3.5 –∫–º ‚Ä¢ –û—Ç–∫—Ä—ã—Ç–æ –¥–æ 19:00</small><br>
                <small style="color: #10b981;">–ú–æ–π–∫–∞, –ø–æ–ª–∏—Ä–æ–≤–∫–∞, —Ö–∏–º—á–∏—Å—Ç–∫–∞</small>
            </div>
            <button class="btn-action">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
        </div>
    </div>
</div>

<div class="content-section" id="rental">
    <h2 class="section-title">üöò –ê—Ä–µ–Ω–¥–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</h2>

    <div class="rental-card">
        <div class="car-image">
            <img src="https://images.unsplash.com/photo-1621007947382-bb3c3994e3fb?w=800&h=600&fit=crop" alt="Toyota Camry">
        </div>
        <div class="car-info">
            <div class="car-title">Toyota Camry 2020</div>
            <div class="car-specs">
                <div class="spec-item"><span class="spec-icon">‚öôÔ∏è</span> –ê–≤—Ç–æ–º–∞—Ç</div>
                <div class="spec-item"><span class="spec-icon">‚õΩ</span> 3.5L V6</div>
                <div class="spec-item"><span class="spec-icon">üë•</span> 5 –º–µ—Å—Ç</div>
                <div class="spec-item"><span class="spec-icon">üí®</span> 9.5 –ª/100–∫–º</div>
                <div class="spec-item"><span class="spec-icon">üé®</span> –ë–µ–ª—ã–π</div>
                <div class="spec-item"><span class="spec-icon">üß≥</span> 524–ª –±–∞–≥–∞–∂–Ω–∏–∫</div>
            </div>
            <div style="color: #8b95c9; margin: 10px 0;">
                ‚úì –ö–∞–º–µ—Ä–∞ –∑–∞–¥–Ω–µ–≥–æ –≤–∏–¥–∞ ‚Ä¢ ‚úì –ö–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å ‚Ä¢ ‚úì –ö—Ä—É–∏–∑-–∫–æ–Ω—Ç—Ä–æ–ª—å
            </div>
            <div class="price" style="margin-top: 15px;">15,000‚Ç∏/–¥–µ–Ω—å</div>
        </div>
        <button class="btn-action" style="width: 100%;" onclick="rentCar('Toyota Camry 2020', '15,000‚Ç∏/–¥–µ–Ω—å', 'üöô')">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>
    </div>

    <div class="rental-card">
        <div class="car-image">
            <img src="https://images.unsplash.com/photo-1590362891991-f776e747a588?w=800&h=600&fit=crop" alt="Honda Accord">
        </div>
        <div class="car-info">
            <div class="car-title">Honda Accord 2019</div>
            <div class="car-specs">
                <div class="spec-item"><span class="spec-icon">‚öôÔ∏è</span> –ê–≤—Ç–æ–º–∞—Ç</div>
                <div class="spec-item"><span class="spec-icon">‚õΩ</span> 2.0L Turbo</div>
                <div class="spec-item"><span class="spec-icon">üë•</span> 5 –º–µ—Å—Ç</div>
                <div class="spec-item"><span class="spec-icon">üí®</span> 8.2 –ª/100–∫–º</div>
                <div class="spec-item"><span class="spec-icon">üé®</span> –ß–µ—Ä–Ω—ã–π</div>
                <div class="spec-item"><span class="spec-icon">üß≥</span> 473–ª –±–∞–≥–∞–∂–Ω–∏–∫</div>
            </div>
            <div style="color: #8b95c9; margin: 10px 0;">
                ‚úì –ö–∞–º–µ—Ä–∞ 360¬∞ ‚Ä¢ ‚úì –ü–æ–¥–æ–≥—Ä–µ–≤ —Å–∏–¥–µ–Ω–∏–π ‚Ä¢ ‚úì –ù–∞–≤–∏–≥–∞—Ü–∏—è
            </div>
            <div class="price" style="margin-top: 15px;">12,000‚Ç∏/–¥–µ–Ω—å</div>
        </div>
        <button class="btn-action" style="width: 100%;" onclick="rentCar('Honda Accord 2019', '12,000‚Ç∏/–¥–µ–Ω—å', 'üöó')">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>
    </div>

    <div class="rental-card">
        <div class="car-image">
            <img src="https://images.unsplash.com/photo-1617654112368-307921291f42?w=800&h=600&fit=crop" alt="Hyundai Sonata">
        </div>
        <div class="car-info">
            <div class="car-title">Hyundai Sonata 2021</div>
            <div class="car-specs">
                <div class="spec-item"><span class="spec-icon">‚öôÔ∏è</span> –ê–≤—Ç–æ–º–∞—Ç</div>
                <div class="spec-item"><span class="spec-icon">‚õΩ</span> 1.6L Turbo</div>
                <div class="spec-item"><span class="spec-icon">üë•</span> 5 –º–µ—Å—Ç</div>
                <div class="spec-item"><span class="spec-icon">üí®</span> 7.8 –ª/100–∫–º</div>
                <div class="spec-item"><span class="spec-icon">üé®</span> –°–µ—Ä–µ–±—Ä–∏—Å—Ç—ã–π</div>
                <div class="spec-item"><span class="spec-icon">üß≥</span> 510–ª –±–∞–≥–∞–∂–Ω–∏–∫</div>
            </div>
            <div style="color: #8b95c9; margin: 10px 0;">
                ‚úì –ö–∞–º–µ—Ä–∞ 360¬∞ ‚Ä¢ ‚úì Android Auto ‚Ä¢ ‚úì LED —Ñ–∞—Ä—ã
            </div>
            <div class="price" style="margin-top: 15px;">13,500‚Ç∏/–¥–µ–Ω—å</div>
        </div>
        <button class="btn-action" style="width: 100%;" onclick="rentCar('Hyundai Sonata 2021', '13,500‚Ç∏/–¥–µ–Ω—å', 'üöï')">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>
    </div>
    
    <div class="rental-card">
        <div class="car-image">
            <img src="https://images.unsplash.com/photo-1502877546875-bffb84c7a6e4?w=800&h=600&fit=crop" alt="Mercedes-Benz C-Class">
        </div>
        <div class="car-info">
            <div class="car-title">Mercedes-Benz C-Class 2022</div>
            <div class="car-specs">
                <div class="spec-item"><span class="spec-icon">‚öôÔ∏è</span> –ê–≤—Ç–æ–º–∞—Ç</div>
                <div class="spec-item"><span class="spec-icon">‚õΩ</span> 2.0L Turbo</div>
                <div class="spec-item"><span class="spec-icon">üë•</span> 5 –º–µ—Å—Ç</div>
                <div class="spec-item"><span class="spec-icon">üí®</span> 7.0 –ª/100–∫–º</div>
                <div class="spec-item"><span class="spec-icon">üé®</span> –ß–µ—Ä–Ω—ã–π</div>
                <div class="spec-item"><span class="spec-icon">üß≥</span> 455–ª –±–∞–≥–∞–∂–Ω–∏–∫</div>
            </div>
            <div style="color: #8b95c9; margin: 10px 0;">
                ‚úì –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫—Ä—É–∏–∑ ‚Ä¢ ‚úì –ü–∞–Ω–æ—Ä–∞–º–Ω–∞—è –∫—Ä—ã—à–∞ ‚Ä¢ ‚úì Apple CarPlay
            </div>
            <div class="price" style="margin-top: 15px;">25,000‚Ç∏/–¥–µ–Ω—å</div>
        </div>
        <button class="btn-action" style="width: 100%;" onclick="rentCar('Mercedes-Benz C-Class 2022', '25,000‚Ç∏/–¥–µ–Ω—å', 'üèéÔ∏è')">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>
    </div>

    <div class="rental-card">
        <div class="car-image">
            <img src="https://images.unsplash.com/photo-1549399517-8092243e80d0?w=800&h=600&fit=crop" alt="BMW X5">
        </div>
        <div class="car-info">
            <div class="car-title">BMW X5 2023</div>
            <div class="car-specs">
                <div class="spec-item"><span class="spec-icon">‚öôÔ∏è</span> –ê–≤—Ç–æ–º–∞—Ç</div>
                <div class="spec-item"><span class="spec-icon">‚õΩ</span> 3.0L Turbo</div>
                <div class="spec-item"><span class="spec-icon">üë•</span> 5 –º–µ—Å—Ç</div>
                <div class="spec-item"><span class="spec-icon">üí®</span> 10.5 –ª/100–∫–º</div>
                <div class="spec-item"><span class="spec-icon">üé®</span> –°–∏–Ω–∏–π</div>
                <div class="spec-item"><span class="spec-icon">üß≥</span> 650–ª –±–∞–≥–∞–∂–Ω–∏–∫</div>
            </div>
            <div style="color: #8b95c9; margin: 10px 0;">
                ‚úì –ü–æ–ª–Ω—ã–π –ø—Ä–∏–≤–æ–¥ ‚Ä¢ ‚úì –ü—Ä–æ–µ–∫—Ü–∏–æ–Ω–Ω—ã–π –¥–∏—Å–ø–ª–µ–π ‚Ä¢ ‚úì –í–µ–Ω—Ç–∏–ª—è—Ü–∏—è —Å–∏–¥–µ–Ω–∏–π
            </div>
            <div class="price" style="margin-top: 15px;">30,000‚Ç∏/–¥–µ–Ω—å</div>
        </div>
        <button class="btn-action" style="width: 100%;" onclick="rentCar('BMW X5 2023', '30,000‚Ç∏/–¥–µ–Ω—å', 'SUV')">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>
    </div>

    <div class="rental-card">
        <div class="car-image">
            <img src="https://images.unsplash.com/photo-1587593810161-eedf895581b3?w=800&h=600&fit=crop" alt="Tesla Model 3">
        </div>
        <div class="car-info">
            <div class="car-title">Tesla Model 3 2024</div>
            <div class="car-specs">
                <div class="spec-item"><span class="spec-icon">‚öôÔ∏è</span> –ê–≤—Ç–æ–º–∞—Ç</div>
                <div class="spec-item"><span class="spec-icon">‚ö°</span> –≠–ª–µ–∫—Ç—Ä–æ</div>
                <div class="spec-item"><span class="spec-icon">üë•</span> 5 –º–µ—Å—Ç</div>
                <div class="spec-item"><span class="spec-icon">üí®</span> 450 –∫–º –∑–∞–ø–∞—Å —Ö–æ–¥–∞</div>
                <div class="spec-item"><span class="spec-icon">üé®</span> –ö—Ä–∞—Å–Ω—ã–π</div>
                <div class="spec-item"><span class="spec-icon">üß≥</span> 649–ª –±–∞–≥–∞–∂–Ω–∏–∫</div>
            </div>
            <div style="color: #8b95c9; margin: 10px 0;">
                ‚úì –ê–≤—Ç–æ–ø–∏–ª–æ—Ç ‚Ä¢ ‚úì –ü–∞–Ω–æ—Ä–∞–º–Ω–∞—è –∫—Ä—ã—à–∞ ‚Ä¢ ‚úì –ë—ã—Å—Ç—Ä–∞—è –∑–∞—Ä—è–¥–∫–∞
            </div>
            <div class="price" style="margin-top: 15px;">28,000‚Ç∏/–¥–µ–Ω—å</div>
        </div>
        <button class="btn-action" style="width: 100%;" onclick="rentCar('Tesla Model 3 2024', '28,000‚Ç∏/–¥–µ–Ω—å', 'üîå')">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>
    </div>
    <div id="trackingSection" style="display: none;">
        <h2 class="section-title" style="margin-top: 40px;">üìç –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</h2>
        <div class="rental-card">
            <div class="tracking-info">
                <div class="tracking-status">
                    <div>
                        <strong id="trackedCarName">Toyota Camry 2020</strong><br>
                        <small style="color: #8b95c9;" id="trackedCarPrice">15,000‚Ç∏/–¥–µ–Ω—å</small>
                    </div>
                    <span class="status available">–ê–∫—Ç–∏–≤–Ω–∞</span>
                </div>
                <div style="text-align: center; margin-bottom: 15px; font-size: 64px;" id="carIcon"></div>
                
                <div class="map-placeholder" style="height: 350px; margin: 15px 0;">
                    <div id="trackingMap"></div>
                </div>

                <div style="display: flex; gap: 20px; justify-content: center; margin: 15px 0; padding: 15px; background: #0a0e27; border-radius: 10px;">
                    <div style="text-align: center;">
                        <div style="color: #667eea; font-size: 24px; font-weight: bold;">45 –∫–º/—á</div>
                        <div style="color: #8b95c9; font-size: 12px;">–°–∫–æ—Ä–æ—Å—Ç—å</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: #10b981; font-size: 24px; font-weight: bold;">78%</div>
                        <div style="color: #8b95c9; font-size: 12px;">–¢–æ–ø–ª–∏–≤–æ</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: #667eea; font-size: 24px; font-weight: bold;">24¬∞C</div>
                        <div style="color: #8b95c9; font-size: 12px;">–°–∞–ª–æ–Ω</div>
                    </div>
                </div>

                <div style="display: flex; gap: 10px;">
                    <button class="btn-action" style="flex: 1;" onclick="showHistory()">üìä –ò—Å—Ç–æ—Ä–∏—è</button>
                    <button class="btn-action" style="flex: 1; background: #ef4444;" onclick="endRental()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –∞—Ä–µ–Ω–¥—É</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="content-section" id="chat">
    <h2 class="section-title">üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</h2>
    
    <div class="card">
        <div class="chat-container">
            <div class="messages" id="messages">
                <div class="message">
                    <strong>–ê–≤—Ç–æ–ú–∞—Å—Ç–µ—Ä –ü—Ä–æ—Ñ–∏</strong><br>
                    –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ú–æ–∂–µ–º –∑–∞–ø–∏—Å–∞—Ç—å –≤–∞—Å –Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –Ω–∞ –∑–∞–≤—Ç—Ä–∞, 10:00. –ü–æ–¥—Ö–æ–¥–∏—Ç?
                </div>
                <div class="message received">
                    –î–∞, –æ—Ç–ª–∏—á–Ω–æ! –ó–∞–ø–∏—Å—ã–≤–∞—é—Å—å.
                </div>
                <div class="message">
                    –û—Ç–ª–∏—á–Ω–æ! –ñ–¥–µ–º –≤–∞—Å –∑–∞–≤—Ç—Ä–∞ –≤ 10:00 –ø–æ –∞–¥—Ä–µ—Å—É —É–ª. –ê–±–∞—è, 45
                </div>
            </div>
            <div class="input-group">
                <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." id="chatInput">
                <button class="btn-action" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
</div>

<div class="content-section" id="roadside-assistance">
    <h2 class="section-title">üÜò –ü–æ–º–æ—â—å –Ω–∞ –¥–æ—Ä–æ–≥–µ</h2>
    
    <div class="card">
        <div class="service-item">
            <div>
                <strong>–ó–∞–∫–∞–∑–∞—Ç—å —ç–≤–∞–∫—É–∞—Ç–æ—Ä</strong><br>
                <small style="color: #8b95c9;">–ü—Ä–∏—à–ª–µ–º –±–ª–∏–∂–∞–π—à–∏–π —ç–≤–∞–∫—É–∞—Ç–æ—Ä</small>
            </div>
            <button class="btn-action" onclick="orderRoadsideAssistance('–≠–≤–∞–∫—É–∞—Ç–æ—Ä')">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
    </div>

    <div class="card">
        <div class="service-item">
            <div>
                <strong>–ó–∞–º–µ–Ω–∞ –∫–æ–ª–µ—Å–∞</strong><br>
                <small style="color: #8b95c9;">–ü–æ–º–æ—â—å —Å –ø—Ä–æ–∫–æ–ª–æ—Ç—ã–º –∫–æ–ª–µ—Å–æ–º</small>
            </div>
            <button class="btn-action" onclick="orderRoadsideAssistance('–ó–∞–º–µ–Ω–∞ –∫–æ–ª–µ—Å–∞')">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
    </div>

    <div class="card">
        <div class="service-item">
            <div>
                <strong>–ü–æ–¥–∑–∞—Ä—è–¥–∫–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞</strong><br>
                <small style="color: #8b95c9;">–ó–∞–≤–µ–¥–µ–º –≤–∞—à –∞–≤—Ç–æ–º–æ–±–∏–ª—å</small>
            </div>
            <button class="btn-action" onclick="orderRoadsideAssistance('–ü–æ–¥–∑–∞—Ä—è–¥–∫–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞')">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
    </div>
    
    <div class="card">
        <div class="service-item">
            <div>
                <strong>–î–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–ø–ª–∏–≤–∞</strong><br>
                <small style="color: #8b95c9;">–ü—Ä–∏–≤–µ–∑–µ–º —Ç–æ–ø–ª–∏–≤–æ –ø—Ä—è–º–æ –∫ –≤–∞–º</small>
            </div>
            <button class="btn-action" onclick="orderRoadsideAssistance('–î–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–ø–ª–∏–≤–∞')">–ó–∞–∫–∞–∑–∞—Ç—å</button>
        </div>
    </div>
</div>
</div>

<script>
let rentedCar = null;
let parkingMap, fuelMap, trackingMap;
let carMarker;

function initMaps() {
    // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ö—ã–∑—ã–ª–æ—Ä–¥—ã
    const kyzylorda = [44.8526, 65.5089];

    // –ö–∞—Ä—Ç–∞ –ø–∞—Ä–∫–æ–≤–æ–∫
    if (!parkingMap && document.getElementById('map')) {
        parkingMap = L.map('map').setView(kyzylorda, 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap'
        }).addTo(parkingMap);

        // –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∫–æ–≤–∫–∏
        const parkings = [
            { id: 'dostyk-plaza', name: '–¢–†–¶ "Dostyk Plaza"', pos: [44.8556, 65.5119], spaces: 12 },
            { id: 'mega-center', name: '–ü–∞—Ä–∫–æ–≤–∫–∞ "Mega Center"', pos: [44.8496, 65.5059], spaces: 28 },
            { id: 'city-mall', name: '–ö—Ä—ã—Ç–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞ "City Mall"', pos: [44.8426, 65.4989], spaces: 0 },
            { id: 'airport-parking', name: '–ü–∞—Ä–∫–æ–≤–∫–∞ –ê—ç—Ä–æ–ø–æ—Ä—Ç', pos: [44.8700, 65.5500], spaces: 50 },
            { id: 'railway-station-parking', name: '–ü–∞—Ä–∫–æ–≤–∫–∞ –ñ–î –í–æ–∫–∑–∞–ª', pos: [44.8200, 65.5200], spaces: 15 }
        ];

        parkings.forEach(p => {
            const icon = L.divIcon({
                html: p.spaces > 0 ? 'üÖøÔ∏è' : 'üö´',
                className: 'custom-icon',
                iconSize: [30, 30]
            });
            const marker = L.marker(p.pos, { icon }).addTo(parkingMap)
                .bindPopup(`<b>${p.name}</b><br>${p.spaces > 0 ? p.spaces + ' –º–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ' : '–ó–∞–Ω—è—Ç–æ'}`);
            
            marker.on('click', () => {
                parkingMap.setView(p.pos, 15);
                marker.openPopup();
            });
        });
    }

    // –ö–∞—Ä—Ç–∞ –ê–ó–°
    if (!fuelMap && document.getElementById('fuelMap')) {
        fuelMap = L.map('fuelMap').setView(kyzylorda, 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap'
        }).addTo(fuelMap);

        const stations = [
            { id: 'kazmunaygaz-45', name: '–ö–∞–∑–ú—É–Ω–∞–π–ì–∞–∑ –ê–ó–° ‚Ññ45', pos: [44.8586, 65.5149], price: '245‚Ç∏', fuelTypes: '–ê–ò-92, –ê–ò-95, –î–¢' },
            { id: 'helios-azs', name: 'Helios –ê–ó–°', pos: [44.8466, 65.5029], price: '250‚Ç∏', fuelTypes: '–ê–ò-92, –ê–ò-95' },
            { id: 'sinooil-12', name: 'Sinooil –ê–ó–° ‚Ññ12', pos: [44.8396, 65.4959], price: '242‚Ç∏', fuelTypes: '–ê–ò-92, –ê–ò-95, –î–¢, –ì–∞–∑' },
            { id: 'royal-petrol', name: 'Royal Petrol –ê–ó–°', pos: [44.8650, 65.5250], price: '248‚Ç∏', fuelTypes: '–ê–ò-92, –ê–ò-95' },
            { id: 'petro-kazakhstan', name: 'Petro Kazakhstan', pos: [44.8300, 65.4800], price: '240‚Ç∏', fuelTypes: '–ê–ò-92, –ê–ò-95, –î–¢' }
        ];

        stations.forEach(s => {
            const icon = L.divIcon({
                html: '‚õΩ',
                className: 'custom-icon',
                iconSize: [30, 30]
            });
            const marker = L.marker(s.pos, { icon }).addTo(fuelMap)
                .bindPopup(`<b>${s.name}</b><br>${s.fuelTypes}<br>–ê–ò-95: ${s.price}`);

            marker.on('click', () => {
                fuelMap.setView(s.pos, 15);
                marker.openPopup();
            });
        });
    }
}

function focusMapOnMarker(mapId, lat, lng, zoom, name, description) {
    let targetMap;
    if (mapId === 'parkingMap') targetMap = parkingMap;
    else if (mapId === 'fuelMap') targetMap = fuelMap;
    else return;

    if (targetMap) {
        targetMap.setView([lat, lng], zoom);
        // Optionally open a popup if details are provided
        L.popup()
            .setLatLng([lat, lng])
            .setContent(`<b>${name}</b><br>${description}`)
            .openOn(targetMap);
    }
}

function startApp() {
    document.getElementById('landing').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    setTimeout(initMaps, 100);
}

function goBack() {
    document.getElementById('landing').style.display = 'flex';
    document.getElementById('app').style.display = 'none';
}

document.querySelectorAll('.nav-tab').forEach(tab => {
    tab.addEventListener('click', function() {
        const sectionId = this.getAttribute('data-section');
        
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        
        document.getElementById(sectionId).classList.add('active');
        this.classList.add('active');

        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç—ã –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
        setTimeout(() => {
            if (sectionId === 'parking' && parkingMap) parkingMap.invalidateSize();
            if (sectionId === 'fuel' && fuelMap) fuelMap.invalidateSize();
            if (sectionId === 'rental' && trackingMap) trackingMap.invalidateSize();
            if (sectionId === 'roadside-assistance') { /* No map to invalidate for this section */ }
        }, 100);
    });
});

function sendMessage() {
    const input = document.getElementById('chatInput');
    const messagesDiv = document.getElementById('messages');
    
    if (input.value.trim()) {
        const msg = document.createElement('div');
        msg.className = 'message received';
        msg.textContent = input.value;
        messagesDiv.appendChild(msg);
        input.value = '';
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
}

document.getElementById('chatInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        sendMessage();
    }
});

function showHistory() {
    alert('üìä –ò—Å—Ç–æ—Ä–∏—è –ø–æ–µ–∑–¥–æ–∫:\n\n' +
          '08.10.2025 | 15:30-18:45\n' +
          '—É–ª. –ê–±–∞—è ‚Üí –¢–†–¶ Dostyk Plaza\n' +
          '45 –∫–º ‚Ä¢ 3—á 15–º–∏–Ω\n\n' +
          '07.10.2025 | 09:00-12:30\n' +
          '–¢–†–¶ Mega Center ‚Üí –ê—ç—Ä–æ–ø–æ—Ä—Ç\n' +
          '28 –∫–º ‚Ä¢ 3—á 30–º–∏–Ω\n\n' +
          '06.10.2025 | 14:20-16:00\n' +
          '—É–ª. –ì–æ–≥–æ–ª—è ‚Üí City Mall\n' +
          '12 –∫–º ‚Ä¢ 1—á 40–º–∏–Ω');
}

function endRental() {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∞—Ä–µ–Ω–¥—É?')) {
        const days = 3;
        const totalCost = rentedCar ? parseInt(rentedCar.price.replace(/[^\d]/g, '')) * days : 0;
        alert('‚úÖ –ê—Ä–µ–Ω–¥–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n\n' +
              '–ê–≤—Ç–æ–º–æ–±–∏–ª—å: ' + (rentedCar ? rentedCar.name : 'N/A') + '\n' +
              '–û–±—â–µ–µ –≤—Ä–µ–º—è: ' + days + ' –¥–Ω—è\n' +
              '–ü—Ä–æ–±–µ–≥: 85 –∫–º\n' +
              '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ' + totalCost.toLocaleString() + '‚Ç∏\n\n' +
              '–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CarCity!');
        document.getElementById('trackingSection').style.display = 'none';
        rentedCar = null;
    }
}

function orderRoadsideAssistance(serviceType) {
    alert(`‚úÖ –£—Å–ª—É–≥–∞ "${serviceType}" –∑–∞–∫–∞–∑–∞–Ω–∞!\n\n–ù–∞—à —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —É–∂–µ –≤ –ø—É—Ç–∏ –∏ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 10 –º–∏–Ω—É—Ç.`);
}
</script>
</body>
</html>
